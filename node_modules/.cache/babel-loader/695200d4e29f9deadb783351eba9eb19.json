{"ast":null,"code":"import _regeneratorRuntime from\"/home/daniel/code/flindel_challenge/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/daniel/code/flindel_challenge/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/daniel/code/flindel_challenge/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import styles from'./ReturnForm.module.css';var ReturnForm=function ReturnForm(_ref){var setRefund=_ref.setRefund,setReturnableProducts=_ref.setReturnableProducts,setNotification=_ref.setNotification;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setIdInput=_useState2[1];/*Make an api request to check\n  which products of a transaction can be returned and\n  what the total refund will be*/var checkProductReturn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var headers,body,res,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();//Clear any data displayed from previous request\nsetNotification(null);setReturnableProducts([]);setRefund(0);headers={'Content-Type':'application/json'};body=JSON.stringify({id:id});_context.next=8;return fetch('http://localhost:5000/api/transaction/return',{headers:headers,body:body,method:'POST'});case 8:res=_context.sent;_context.next=11;return res.json();case 11:response=_context.sent;//Check for error and update state accordingly \nif(response.error){setNotification(response.error);}else{setRefund(response.refund);setReturnableProducts(response.products);}case 13:case\"end\":return _context.stop();}}},_callee);}));return function checkProductReturn(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"form\",{onSubmit:checkProductReturn,className:styles.form},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",\"aria-label\":\"transaction id\",placeholder:\"Enter transaction id\",value:id,onChange:function onChange(event){return setIdInput(event.target.value);}}),/*#__PURE__*/React.createElement(\"button\",null,\"Submit\"));};export default ReturnForm;","map":{"version":3,"sources":["/home/daniel/code/flindel_challenge/client/src/components/ReturnForm.js"],"names":["React","useState","styles","ReturnForm","setRefund","setReturnableProducts","setNotification","id","setIdInput","checkProductReturn","event","preventDefault","headers","body","JSON","stringify","fetch","method","res","json","response","error","refund","products","form","target","value"],"mappings":"geAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAyD,IAAvDC,CAAAA,SAAuD,MAAvDA,SAAuD,CAA5CC,qBAA4C,MAA5CA,qBAA4C,CAArBC,eAAqB,MAArBA,eAAqB,eACjDL,QAAQ,CAAC,EAAD,CADyC,wCACnEM,EADmE,eAC/DC,UAD+D,eAG1E;;iCAGA,GAAMC,CAAAA,kBAAkB,2FAAG,iBAAMC,KAAN,gJACzBA,KAAK,CAACC,cAAN,GAEA;AACAL,eAAe,CAAC,IAAD,CAAf,CACAD,qBAAqB,CAAC,EAAD,CAArB,CACAD,SAAS,CAAC,CAAD,CAAT,CAEMQ,OARmB,CAQT,CACd,eAAgB,kBADF,CARS,CAYnBC,IAZmB,CAYZC,IAAI,CAACC,SAAL,CAAe,CAACR,EAAE,CAAFA,EAAD,CAAf,CAZY,uBAcPS,CAAAA,KAAK,CAAC,8CAAD,CAAiD,CACtEJ,OAAO,CAAPA,OADsE,CAEtEC,IAAI,CAAJA,IAFsE,CAGtEI,MAAM,CAAE,MAH8D,CAAjD,CAdE,QAcnBC,GAdmB,sCAoBFA,CAAAA,GAAG,CAACC,IAAJ,EApBE,SAoBnBC,QApBmB,eAsBzB;AACA,GAAIA,QAAQ,CAACC,KAAb,CAAoB,CAClBf,eAAe,CAACc,QAAQ,CAACC,KAAV,CAAf,CACD,CAFD,IAEO,CACLjB,SAAS,CAACgB,QAAQ,CAACE,MAAV,CAAT,CACAjB,qBAAqB,CAACe,QAAQ,CAACG,QAAV,CAArB,CACD,CA5BwB,uDAAH,kBAAlBd,CAAAA,kBAAkB,6CAAxB,CA+BA,mBACE,4BAAM,QAAQ,CAAEA,kBAAhB,CAAoC,SAAS,CAAEP,MAAM,CAACsB,IAAtD,eACE,6BACE,IAAI,CAAC,MADP,CAEE,aAAW,gBAFb,CAGE,WAAW,CAAC,sBAHd,CAIE,KAAK,CAAEjB,EAJT,CAKE,QAAQ,CAAE,kBAAAG,KAAK,QAAIF,CAAAA,UAAU,CAACE,KAAK,CAACe,MAAN,CAAaC,KAAd,CAAd,EALjB,EADF,cAOE,2CAPF,CADF,CAWD,CAhDD,CAkDA,cAAevB,CAAAA,UAAf","sourcesContent":["import React, {useState} from 'react';\nimport styles from './ReturnForm.module.css';\n\nconst ReturnForm = ({setRefund, setReturnableProducts, setNotification}) => {\n  const [id, setIdInput] = useState('')\n\n  /*Make an api request to check\n  which products of a transaction can be returned and\n  what the total refund will be*/\n  const checkProductReturn = async event => {\n    event.preventDefault()\n\n    //Clear any data displayed from previous request\n    setNotification(null)\n    setReturnableProducts([])\n    setRefund(0)\n\n    const headers = {\n      'Content-Type': 'application/json'\n    }\n    \n    const body = JSON.stringify({id})\n    \n    const res = await fetch('http://localhost:5000/api/transaction/return', {\n      headers,\n      body,\n      method: 'POST'\n    })\n\n    const response = await res.json()\n\n    //Check for error and update state accordingly \n    if (response.error) {\n      setNotification(response.error)\n    } else {\n      setRefund(response.refund)\n      setReturnableProducts(response.products)\n    }\n  }\n\n  return (\n    <form onSubmit={checkProductReturn} className={styles.form}>\n      <input \n        type=\"text\" \n        aria-label=\"transaction id\" \n        placeholder=\"Enter transaction id\"\n        value={id}\n        onChange={event => setIdInput(event.target.value)}/>\n      <button>Submit</button>\n    </form>\n  )\n}\n\nexport default ReturnForm"]},"metadata":{},"sourceType":"module"}